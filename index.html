<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>Rotating Crypto Charts Screen</title>
    <style type="text/css">
      html{
        height: 100%;
      }
      body {
        position:absolute;
        top:0;
        bottom:0;
        right:0;
        left:0;
        margin: auto;
      }
      .clickDiv {
        width: 50%;
        height: 40%;
        position: absolute !important;
        bottom:0;
        z-index: 1;
      }
    </style>
  </head>
  <body>
  <div class="clickDiv" style="left: 0" onclick="prevMarket()"></div>
  <div class="clickDiv" style="right:0" onclick="nextMarket()"></div>
  <iframe src="https://embed.cryptowat.ch/bitstamp/btcusd/5m" id="chart" frameborder="0" allowfullscreen="true" width="100%" height="100%"></iframe>
    <script>
      const markets = [
        ['bitstamp', 'btcusd'],
        ['kraken', 'etheur'],
        ['kraken', 'ethbtc'],
        ['kraken', 'repeur'],
        ['kraken', 'repeth'],
        ['kraken', 'gnoeur'],
        ['kraken', 'gnoeth'],
      ];
      let marketIndex = 1;
      let chartSwitch;

      function nextMarket() {
        const market = markets[marketIndex];

        document.getElementById('chart').src = `https://embed.cryptowat.ch/${market[0]}/${market[1]}/5m`;

        // next one will be
        marketIndex++;
        if(marketIndex >= markets.length) {
          marketIndex = 0;
        }

        clearTimeout(chartSwitch);
        chartSwitch = setTimeout(nextMarket, 60000);
      }

      function prevMarket() {
        // jump back 2 as we are always on next index
        marketIndex -= 2;
        if(marketIndex < 0) {
          marketIndex = markets.length + marketIndex;
        }

        nextMarket();
      }

      chartSwitch = setTimeout(nextMarket, 60000);
    </script>
  </body>
</html>
